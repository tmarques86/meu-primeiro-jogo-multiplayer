<html>
    <head>
        <meta charset="utf-8">
        <title>Meu primeiro Jogo Multiplayer</title>
        <style>
            #screen {
                border: 10px solid #CCC;
                /*image-rendering: pixelated;
                image-rendering: crisp-edges;
                image-rendering: -moz-crisp-edges;
                width: 400px;
                height: 400px;*/
            }
        </style>
    </head>
    <body>
        <canvas id="screen" width="500" height="500" >


        <script>
            const screen = document.getElementById('screen')
            const context = screen.getContext('2d')

            const screenHeight = screen.height;
            const screenWidth = screen.width;
            const objWidth = 20
            const objHeight = 20
            const ratioX = screenWidth / objWidth
            const ratioY = screenHeight / objHeight

            const game = {
                player: 'player1',
                players: {
                    'player1': { x:1, y:1 },
                    'player2': { x:10, y:10 }
                },
                fruits: {
                    'fruit1': { x:3, y:2 }
                }
            }


            document.addEventListener('keydown', handleKeyDown)
            
            function handleKeyDown(event){
                const keyPressed = event.key
                const player = game.players[game.player];

                if (keyPressed === 'ArrowUp' && player.y > 1) {
                    player.y = player.y - 1;
                }

                if (keyPressed === 'ArrowDown' && player.y < ratioY) {
                    player.y = player.y + 1;
                }

                if (keyPressed === 'ArrowLeft' && player.x > 1) {
                    player.x = player.x - 1;
                }

                if (keyPressed === 'ArrowRight' && player.x < ratioX) {
                    player.x = player.x + 1;
                }

            }

            renderScreen()

            function renderScreen(){
                context.fillStyle = 'white';
                context.clearRect(0, 0, 500, 500)

                for (const playerId in game.players ){
                    const player = game.players[playerId]
                    context.fillStyle = 'black';
                    context.fillRect(player.x * objWidth - objWidth, player.y * objHeight - objHeight, objWidth, objHeight)
                }

                for (const fluitId in game.fruits ){
                    const fruit = game.fruits[fluitId]
                    context.fillStyle = 'green';
                    context.fillRect(fruit.x * objWidth - objWidth, fruit.y * objHeight - objHeight, objWidth, objHeight)
                }

                requestAnimationFrame( renderScreen )
            }
        </script>

    </body>
</html>